<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown</title>
    <script src="js/spx_interface.js"></script>
    <link rel="stylesheet" type="text/css" href="css/spx_fonts.css" />
    <link rel="stylesheet" type="text/css" id="DynamicTheme" href="themes/default.css" />
    <link rel="stylesheet" href="./COUNTDOWN/COUNTDOWN.css">
    <script>
        function runTemplateUpdate() {
        }

        function runAnimationIN() {
        }

        function runAnimationOUT() {
        }
    </script>
    <script type="text/javascript">
        window.SPXGCTemplateDefinition = {
            "defversion": "1",
            "description": "Countdown",
            "playserver": "OVERLAY",
            "playchannel": "1",
            "playlayer": "10",
            "webplayout": "5",
            "out": "25000",
            "dataformat": "json",
            "uicolor": "5",
            "DataFields": [
                {
                    "ftype" : "instruction",
                    "value" : "This graphic has no inputs, it will display a countdown full-frame"
                },
                {
                    "ftype": "spacer"
                }
            ]
        };
    </script>
</head>

<body>
    <canvas id="animationCanvasCountdown" width="1920" height="1080"></canvas>
    <script>
        const totalFrames = 809; // Total number of frames in the sequence
        const canvas = document.getElementById('animationCanvasCountdown');
        const ctx = canvas.getContext('2d');
        let currentFrame = 0;

        function getFrameName(index) {
            // Format the file name based on the sequence
            const paddedIndex = index.toString().padStart(3, '0'); // Ensures 3-digit padding
            return `TST-01-NYEcd-${paddedIndex}.png`;
        }

        function loadFrame(index) {
            const img = new Image();
            img.src = `./COUNTDOWN/images/${getFrameName(index)}`; // Ensure the path matches your structure
            img.onload = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear previous frame
                ctx.drawImage(img, 0, 0); // Draw the new frame
            };
        }

        function animate() {
            if (currentFrame < 810) {
                loadFrame(currentFrame);
                currentFrame++;
                setTimeout(animate, 1000 / 30);
            }
        }

        animate();
    </script>
</body>

</html>